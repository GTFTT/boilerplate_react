(this.webpackJsonpboilerplate_react=this.webpackJsonpboilerplate_react||[]).push([[0],{106:function(t,e,a){},109:function(t,e,a){},123:function(t,e,a){},125:function(t,e,a){},126:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),o=a(26),r=a.n(o),i=(a(106),a(107),a(63)),s=a(64),u=a(77),l=a(76),p=a(133),d=a(131),m=a(134),f=a(132),h=a(97),j=a(98),O=a(19),g=a.n(O),b=a(90),N=a.n(b),T=a(58),v=a(137),S=a(136),A=a(16);function x(t){return g.a.compact(t).join("\n")}var y=function(t){var e=t.moduleName,a=t.actions;return{generateHeader:function(){return x(["/** ------------------------------------- Constants ------------------------------------- **/","export const moduleName = '".concat(e,"';"),"const prefix = `cpb/${moduleName}`;",""])},generateConstants:function(){var t="";return g.a.each(a,(function(e){t+=function(t){var e=t.actionType,a=t.constants,n="";switch(e){case A.ACTION_TYPES.fetch:n+="export const ".concat(a.fetch," = `${prefix}/").concat(a.fetch,"`;\n"),n+="export const ".concat(a.fetchSuccess," = `${prefix}/").concat(a.fetchSuccess,"`;\n"),n+="export const ".concat(a.setFetching," = `${prefix}/").concat(a.setFetching,"`;\n\n");break;case A.ACTION_TYPES.set:n+="export const ".concat(a.set," = `${prefix}/").concat(a.set,"`;\n");break;case A.ACTION_TYPES.poorSagaAction:n+="export const ".concat(a.poorSagaAction," = `${prefix}/").concat(a.poorSagaAction,"`;\n");break;case A.ACTION_TYPES.poorReducerAction:n+="export const ".concat(a.poorReducerAction," = `${prefix}/").concat(a.poorReducerAction,"`;\n")}return n}(e)})),t},generateReducerInitState:function(){var t=x(["/** ------------------------------------- Reducer ------------------------------------- **/","const ReducerState = {\n"]);return g.a.each(a,(function(e){t+=function(t){var e=t.actionInitValue,a=t.actionType,n=t.valueNames,c="";switch(a){case A.ACTION_TYPES.fetch:c+="\t".concat(n.value,": ").concat(e,",\n"),c+="\t".concat(n.fetchingValue,": false,\n\n");break;case A.ACTION_TYPES.set:c+="\t".concat(n.value,": ").concat(e,",\n")}return c}(e)})),t+="};\n"},generateReducer:function(){var t=x(["export default function reducer(state = ReducerState, action) {","\tconst { type, payload } = action;","\tswitch (type) {\n"]);return g.a.each(a,(function(e){t+=function(t){var e=t.actionType,a=t.constants,n=t.valueNames,c="";switch(e){case A.ACTION_TYPES.fetch:c=x(["\t\tcase ".concat(a.fetchSuccess,":"),"\t\t\tconst { ".concat(n.value," } = payload;"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t\t".concat(n.value,": ").concat(n.value,","),"\t\t\t};","\t\tcase ".concat(a.setFetching,":"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t\t".concat(n.fetchingValue,": payload,"),"\t\t\t};\n\n"]);break;case A.ACTION_TYPES.set:c=x(["\t\tcase ".concat(a.set,":"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t\t".concat(n.value,": payload"),"\t\t\t};\n\n"]);break;case A.ACTION_TYPES.poorReducerAction:c=x(["\t\tcase ".concat(a.poorReducerAction,":"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t};\n\n"])}return c}(e)})),t+=x(["\t\tdefault:","\t\t\treturn state;","\t}","}"])},generateSelectors:function(){var t=x(["/* ------------------------------------- Selectors ------------------------------------- */\n"]);return g.a.each(a,(function(e){var a=e.actionType,n=(e.actionName,e.selectors),c=e.valueNames;switch(a){case A.ACTION_TYPES.fetch:t+="export const ".concat(n.value," = state => state[ moduleName ].").concat(c.value,";\n"),t+="export const ".concat(n.fetchingValue," = state => state[ moduleName ].").concat(c.fetchingValue,";\n\n");break;case A.ACTION_TYPES.set:t+="export const ".concat(n.value," = state => state[ moduleName ].").concat(c.value,";\n")}})),t},generateActionCreators:function(){var t=x(["/* ------------------------------------- Action Creators -------------------------- */\n"]);return g.a.each(a,(function(e){t+=function(t){var e=t.actionType,a=(t.actionName,t.actionCreators),n=t.constants,c=t.valueNames,o="";switch(e){case A.ACTION_TYPES.fetch:o+=x(["export const ".concat(a.fetch," = () => ({"),"\ttype: \t".concat(n.fetch,","),"});\n","export const ".concat(a.fetchSuccess," = ({").concat(c.value,"}) => ({"),"\ttype: \t".concat(n.fetchSuccess,","),"\tpayload: {".concat(c.value,"}"),"});\n","export const ".concat(a.setFetching," = (value) => ({"),"\ttype: \t".concat(n.setFetching,","),"\tpayload: value","});\n\n"]);break;case A.ACTION_TYPES.set:o+=x(["export const ".concat(a.set," = (value) => ({"),"\ttype: \t".concat(n.set,","),"\tpayload: value","});\n"]);break;case A.ACTION_TYPES.poorSagaAction:o+=x(["export const ".concat(a.poorSagaAction," = () => ({"),"\ttype: \t".concat(n.poorSagaAction,","),"});\n"]);break;case A.ACTION_TYPES.poorReducerAction:o+=x(["export const ".concat(a.poorReducerAction," = () => ({"),"\ttype: \t".concat(n.poorReducerAction,","),"});\n"])}return o}(e)})),t}}};var C=function(t){var e=t.moduleName,a=t.actions,n=Object(S.a)(e),c=function(t){var e=g.a.map(t,(function(t){var e=Object(T.a)(Object(T.a)({},t),{},{constants:{},actionCreators:{},sagas:{}});switch(t.actionType){case A.ACTION_TYPES.fetch:e.constants={setFetching:Object(v.a)("set fetching ".concat(t.actionName)),fetch:Object(v.a)("".concat(t.actionType," ").concat(t.actionName)),fetchSuccess:Object(v.a)("".concat(t.actionType," ").concat(t.actionName," success"))},e.actionCreators={setFetching:Object(S.a)("set fetching ".concat(t.actionName)),fetch:Object(S.a)("".concat(t.actionType," ").concat(t.actionName)),fetchSuccess:Object(S.a)("".concat(t.actionType," ").concat(t.actionName," success"))},e.sagas={sagaName:Object(S.a)("".concat(t.actionType," ").concat(t.actionName," saga"))},e.valueNames={value:Object(S.a)("".concat(t.actionName)),fetchingValue:Object(S.a)("fetching ".concat(t.actionName))},e.selectors={value:Object(S.a)("select ".concat(t.actionName)),fetchingValue:Object(S.a)("select fetching ".concat(t.actionName))},e.propertyName=Object(S.a)(t.actionName);break;case A.ACTION_TYPES.set:e.constants={set:Object(v.a)("".concat(t.actionType," ").concat(t.actionName))},e.actionCreators={set:Object(S.a)("".concat(t.actionType," ").concat(t.actionName))},e.valueNames={value:Object(S.a)("".concat(t.actionName))},e.selectors={value:Object(S.a)("select ".concat(t.actionName))},e.propertyName=Object(S.a)(t.actionName);break;case A.ACTION_TYPES.poorSagaAction:e.constants={poorSagaAction:Object(v.a)("".concat(t.actionName))},e.sagas={sagaName:Object(S.a)("".concat(t.actionName," saga"))},e.actionCreators={poorSagaAction:Object(S.a)("".concat(t.actionName))};case A.ACTION_TYPES.poorReducerAction:e.constants={poorReducerAction:Object(v.a)("".concat(t.actionName))},e.actionCreators={poorReducerAction:Object(S.a)("".concat(t.actionName))}}return e}));return Object.freeze(e)}(a);return console.log("enrichedActions: ",c),{generateDuckFile:function(){var t=y({moduleName:n,actions:c}),e=t.generateHeader,a=t.generateConstants,o=t.generateReducerInitState,r=t.generateReducer,i=t.generateSelectors,s=t.generateActionCreators;return e()+"\n\n"+a()+"\n"+o()+"\n"+r()+"\n\n"+i()+"\n\n"+s()+"\n"},generateSagaFile:function(){var t=function(t){t.moduleName;var e=t.actions,a=g.a.filter(e,(function(t){return t.actionType==A.ACTION_TYPES.fetch})),n=g.a.filter(e,(function(t){return t.actionType==A.ACTION_TYPES.poorSagaAction})),c=g.a.filter(e,(function(t){return t.actionType==A.ACTION_TYPES.set}));return{generateImports:function(){return"\n// vendor\nimport { call, put, all, take, select } from 'redux-saga/effects';\nimport nprogress from 'nprogress';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport history from 'store/history';\n\n//proj\nimport book from 'routes/book';\nimport { emitError } from 'core/ui/duck';\nimport { fetchAPI } from 'utils';\n\n// own\nimport {\n    ".concat(g.a.map(a,(function(t){return t.constants.fetch})).join(",\n\t"),"\n    ").concat(g.a.map(n,(function(t){return t.constants.poorSagaAction})).join(",\n\t"),"\n\n    ").concat(g.a.map(a,(function(t){return t.actionCreators.fetchSuccess})).join(",\n\t"),"\n\n    ").concat(g.a.map(c,(function(t){return t.actionCreators.set})).join(",\n\t"),"\n} from './duck';\n        ")},generateSagas:function(){return g.a.map(e,(function(t){var e=t.actionType,a=t.propertyName,n=t.constants,c=t.actionCreators,o=t.actionFetchURL,r=t.sagas;switch(e){case A.ACTION_TYPES.fetch:return"\nexport function* ".concat(r.sagaName,"() {\n    while (true) {\n        try {\n            yield take(").concat(n.fetch,");\n\n            yield put(").concat(c.setFetching,"(true));\n\n            const ").concat(a," = yield call(fetchAPI, 'GET', `").concat(o||"","`);\n\n            yield put(").concat(c.fetchSuccess,"({").concat(a,"}));\n\n        } catch (error) {\n            yield put(emitError(error));\n        } finally {\n            yield put(").concat(c.setFetching,"(false));\n        }\n    }\n}\n\n                    ");case A.ACTION_TYPES.poorSagaAction:return"\nexport function* ".concat(r.sagaName,"() {\n    while (true) {\n        try {\n            yield take(").concat(n.poorSagaAction,");\n        } catch (error) {\n            yield put(emitError(error));\n        }\n    }\n}\n\n                    ")}}))},generateCommonSaga:function(){return"\nexport function* saga() {\n    yield all([\n        ".concat(g.a.map(e,(function(t){var e=t.actionType,a=t.sagas;switch(e){case A.ACTION_TYPES.fetch:case A.ACTION_TYPES.poorSagaAction:return"call(".concat(a.sagaName,"),\n\t")}})),"\n    ]);\n}\n        ")}}}({moduleName:n,actions:c}),e=t.generateImports,a=t.generateSagas,o=t.generateCommonSaga;return e()+"\n\n"+a()+"\n"+o()+"\n"}}},I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myFile.txt",a=document.createElement("a"),n=new Blob([t],{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=e,document.body.appendChild(a),a.click()},P=a(86),E=a(42),_=a(130),Y=a(61),k=a(139),R=a(135),F=a(138),w=(a(109),a(8)),V=_.b.Item,L=Y.a.Option,U=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).updateState=function(t){var e=n.props.actionsChanged;n.setState(t,(function(){return e&&e(g.a.get(Object(E.a)(n),"state.actions"))}))},n.createNewItem=function(){n.updateState({actions:[].concat(Object(P.a)(g.a.get(Object(E.a)(n),"state.actions")),[{actionName:"vehicles",actionType:A.ACTION_TYPES.fetch,actionFetchURL:void 0,actionInitValue:A.DEF_INIT_VALUES.undefinedValue,key:Object(R.a)()}])})},n.deleteItem=function(t){n.updateState({actions:Object(P.a)(g.a.filter(g.a.get(Object(E.a)(n),"state.actions"),(function(e){return e.key!=t})))})},n._renderAdditionalFields=function(t){var e=t.key,a=t.actionType,c=t.actionFetchURL,o=t.actionInitValue;switch(a){case A.ACTION_TYPES.fetch:return Object(w.jsxs)("div",{children:[Object(w.jsx)(f.a,{value:c,className:"input",placeholder:"Fetching URL",onChange:function(t){return n.changeActionProps(e,{actionFetchURL:t.target.value})}}),Object(w.jsx)(Y.a,{value:o,className:"select",placeholder:"Init value",onChange:function(t){return n.changeActionProps(e,{actionInitValue:t})},children:g.a.map(A.DEF_INIT_VALUES,(function(t,e){return Object(w.jsx)(L,{value:t,children:Object(F.a)(e)})}))})]});case A.ACTION_TYPES.set:case A.ACTION_TYPES.poorSagaAction:case A.ACTION_TYPES.poorReducerAction:return Object(w.jsx)(Y.a,{value:o,className:"select",placeholder:"Select init value",onChange:function(t){return n.changeActionProps(e,{actionInitValue:t})},children:g.a.map(A.DEF_INIT_VALUES,(function(t,e){return Object(w.jsx)(L,{value:t,children:Object(F.a)(e)})}))});default:return}},n.changeActionProps=function(t,e){var a=e.actionName,c=e.actionType,o=e.actionInitValue,r=e.actionFetchURL,i=g.a.get(Object(E.a)(n),"state.actions"),s=g.a.map(i,(function(e){return e.key==t?Object(T.a)(Object(T.a)({},e),{},{actionName:a||e.actionName,actionType:c||e.actionType,actionInitValue:o||e.actionInitValue,actionFetchURL:r||""===r?r:e.actionFetchURL}):e}));n.updateState({actions:s})},n.state={actions:[]},n}return Object(s.a)(a,[{key:"render",value:function(){var t=this;return Object(w.jsx)("div",{children:Object(w.jsx)(_.b,{size:"small",bordered:!0,dataSource:g.a.get(this,"state.actions"),locale:{emptyText:Object(w.jsx)("div",{children:"No actions"})},header:Object(w.jsx)(j.a,{onClick:function(){return t.createNewItem()},type:"primary",children:"Create a new one"}),renderItem:function(e){return Object(w.jsx)(V,{actions:[Object(w.jsx)(j.a,{onClick:function(){return t.deleteItem(e.key)},children:Object(w.jsx)(k.a,{})})],children:Object(w.jsxs)("div",{className:"item",children:[Object(w.jsx)(f.a,{value:g.a.get(e,"actionName"),className:"input",onChange:function(a){return t.changeActionProps(e.key,{actionName:a.target.value})}}),Object(w.jsx)(Y.a,{value:g.a.get(e,"actionType"),className:"select",onChange:function(a){return t.changeActionProps(e.key,{actionType:a})},children:g.a.map(A.ACTION_TYPES,(function(t,e){return Object(w.jsx)(L,{value:t,children:Object(v.a)(e)})}))}),Object(w.jsx)("div",{children:t._renderAdditionalFields(e)})]})})}})})}}]),a}(c.a.Component),M=(a(123),p.a.Panel),D=d.a.TabPane,z=m.a.Group,$=f.a.TextArea,G=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).onGenerateFiles=function(){var t=n.state,e=t.moduleName,a=t.actions;if(e&&!g.a.isEmpty(a)){var c=C({actions:a,moduleName:e}),o=c.generateDuckFile,r=c.generateSagaFile;I(o(),"duck.txt"),I(r(),"saga.txt"),h.a.info({message:Object(w.jsx)("div",{children:Object(w.jsx)("div",{children:"Module: ".concat(e)})})})}else h.a.error({message:"Not enough information provided!"})},n.state={moduleName:void 0,moduleDescription:void 0,generatingComponent:A.COMPONENT_TYPES.poorPage,actions:[]},n}return Object(s.a)(a,[{key:"render",value:function(){var t=this,e=this.state,a=(e.actions,e.generatingComponent);return Object(w.jsxs)("div",{className:"mainConst",children:[Object(w.jsxs)(p.a,{className:"collapse",defaultActiveKey:["1","2"],children:[Object(w.jsx)(M,{header:"Settings",children:Object(w.jsxs)("div",{className:"settingsContainer",children:[Object(w.jsx)(f.a,{placeholder:"Module name",onChange:function(e){return t.setState({moduleName:e.target.value})}}),Object(w.jsx)($,{placeholder:"Module description(comment)",rows:4,className:"textArea",onChange:function(e){return t.setState({moduleDescription:e.target.value})}}),Object(w.jsxs)("div",{className:"radioCont",children:["Module type:",Object(w.jsx)("br",{}),Object(w.jsxs)(z,{value:a,onChange:function(e){return t.setState({generatingComponent:e.target.value})},children:[Object(w.jsx)(m.a,{value:A.COMPONENT_TYPES.poorPage,children:"Poor page"}),Object(w.jsx)(m.a,{value:A.COMPONENT_TYPES.tablePage,children:"Table page"}),Object(w.jsx)(m.a,{value:A.COMPONENT_TYPES.modal,children:"Modal"})]})]})]})},"1"),Object(w.jsx)(M,{header:"Create actions",children:Object(w.jsx)("div",{className:"settingsContainer",children:Object(w.jsxs)(d.a,{className:"tabs",tabPosition:"left",children:[Object(w.jsx)(D,{tab:"Actions generator",children:Object(w.jsx)(U,{actionsChanged:function(e){t.setState({actions:e})}})},"1"),Object(w.jsx)(D,{tab:"Json viewer",children:Object(w.jsx)("div",{className:"jsonContainer",children:Object(w.jsx)(N.a,{name:!1,collapsed:!1,displayObjectSize:!1,displayDataTypes:!1,collapseStringsAfterLength:!0,src:this.state})})},"2")]})})},"2")]}),Object(w.jsx)(j.a,{className:"generateButton",onClick:function(){return t.onGenerateFiles()},children:"Generate file"})]})}}]),a}(c.a.Component),B=a.p+"static/media/logo.6ce24c58.svg";a(125);var J=function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsxs)("header",{className:"App-header",children:[Object(w.jsx)("img",{src:B,className:"App-logo",alt:"logo"}),Object(w.jsx)("div",{className:"title",children:"Boilerplate reducer"})]}),Object(w.jsx)("div",{children:Object(w.jsx)(G,{})})]})};r.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(J,{})}),document.getElementById("root"))},16:function(t,e){var a=Object.freeze({fetch:"fetch",set:"set",poorSagaAction:"poorSagaAction",poorReducerAction:"poorReducerAction"}),n=Object.freeze({undefinedValue:"undefined",nullValue:"null",emptyString:'""',zero:"0",emptyObject:"{}",emptyArray:"[]"}),c=Object.freeze({poorPage:"poorPage",tablePage:"tablePage",modal:"modal"});t.exports={ACTION_TYPES:a,DEF_INIT_VALUES:n,COMPONENT_TYPES:c}}},[[126,1,2]]]);
//# sourceMappingURL=main.f82b57c4.chunk.js.map