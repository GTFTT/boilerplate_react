(this.webpackJsonpboilerplate_react=this.webpackJsonpboilerplate_react||[]).push([[0],{105:function(t,e,n){},108:function(t,e,n){},122:function(t,e,n){},124:function(t,e,n){},125:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(24),r=n.n(o),s=(n(105),n(106),n(57)),i=n(58),u=n(72),l=n(71),m=n(131),f=n(95),p=n(130),d=n(96),h=n(16),j=n.n(h),O=n(86),g=n.n(O),b=n(50),v=n(134),N=n(133),y=n(20);function T(t){return j.a.compact(t).join("\n")}var x=function(t){var e=t.moduleName,n=t.actions;return{generateHeader:function(){return T(["/** ------------------------------------- Constants ------------------------------------- **/","export const moduleName = '".concat(e,"';"),"const prefix = `cpb/${moduleName}`;",""])},generateConstants:function(){var t="";return j.a.each(n,(function(e){t+=function(t){var e=t.actionType,n=t.constants,a="";switch(e){case y.ACTION_TYPES.fetch:a+="export const ".concat(n.fetch," = `${prefix}/").concat(n.fetch,"`;\n"),a+="export const ".concat(n.fetchSuccess," = `${prefix}/").concat(n.fetchSuccess,"`;\n"),a+="export const ".concat(n.setFetching," = `${prefix}/").concat(n.setFetching,"`;\n\n");break;case y.ACTION_TYPES.set:a+="export const ".concat(n.set," = `${prefix}/").concat(n.set,"`;\n")}return a}(e)})),t},generateReducerInitState:function(){var t=T(["/** ------------------------------------- Reducer ------------------------------------- **/","const ReducerState = {\n"]);return j.a.each(n,(function(e){t+=function(t){t.actionName;var e=t.actionType,n=t.valueNames,a="";switch(e){case y.ACTION_TYPES.fetch:a+="\t".concat(n.value,",\n"),a+="\t".concat(n.fetchingValue,",\n\n");break;case y.ACTION_TYPES.set:a+="\t".concat(n.value,",\n")}return a}(e)})),t+="};\n"},generateReducer:function(){var t=T(["export default function reducer(state = ReducerState, action) {","\tconst { type, payload } = action;","\tswitch (type) {\n"]);return j.a.each(n,(function(e){t+=function(t){var e=t.actionType,n=t.constants,a=t.valueNames,c="";switch(e){case y.ACTION_TYPES.fetch:c=T(["\t\tcase ".concat(n.fetchSuccess,":"),"\t\t\tconst { ".concat(a.value," } = payload;"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t\t".concat(a.value,": ").concat(a.value,","),"\t\t\t};","\t\tcase ".concat(n.setFetching,":"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t\t".concat(a.fetchingValue,": payload,"),"\t\t\t};\n\n"]);break;case y.ACTION_TYPES.set:c=T(["\t\tcase ".concat(n.set,":"),"\t\t\treturn {","\t\t\t\t...state, ","\t\t\t\t".concat(a.value,": payload"),"\t\t\t};\n\n"])}return c}(e)})),t+=T(["\t\tdefault:","\t\t\treturn state;","\t}","}"])},generateSelectors:function(){var t=T(["/* ------------------------------------- Selectors ------------------------------------- */\n"]);return j.a.each(n,(function(e){var n=e.actionType,a=(e.actionName,e.selectors),c=e.valueNames;switch(n){case y.ACTION_TYPES.fetch:t+="export const ".concat(a.value," = state => state[ moduleName ].").concat(c.value,";\n"),t+="export const ".concat(a.fetchingValue," = state => state[ moduleName ].").concat(c.fetchingValue,";\n\n");break;case y.ACTION_TYPES.set:t+="export const ".concat(a.value," = state => state[ moduleName ].").concat(c.value,";\n")}})),t},generateActionCreators:function(){var t=T(["/* ------------------------------------- Action Creators -------------------------- */\n"]);return j.a.each(n,(function(e){t+=function(t){var e=t.actionType,n=t.actionName,a=t.actionCreators,c=t.constants,o=t.valueNames,r=(Object(v.a)(String("".concat(e," ").concat(n))),Object(N.a)(String("".concat(e," ").concat(n))),"");switch(e){case y.ACTION_TYPES.fetch:r+=T(["export const ".concat(a.fetch," = () => ({"),"\ttype: \t".concat(c.fetch,","),"});\n","export const ".concat(a.fetchSuccess," = ({").concat(o.value,"}) => ({"),"\ttype: \t".concat(c.fetchSuccess,","),"\tpayload: {".concat(o.value,"}"),"});\n","export const ".concat(a.setFetching," = (value) => ({"),"\ttype: \t".concat(c.setFetching,","),"\tpayload: value","});\n\n"]);break;case y.ACTION_TYPES.set:r+=T(["export const ".concat(a.set," = (value) => ({"),"\ttype: \t".concat(c.set,","),"\tpayload: value","});\n"])}return r}(e)})),t}}};var S=function(t){var e=t.moduleName,n=function(t){var e=j.a.map(t,(function(t){var e=Object(b.a)(Object(b.a)({},t),{},{constants:{},actionCreators:{},sagas:{}});switch(t.actionType){case y.ACTION_TYPES.fetch:e.constants={setFetching:Object(v.a)("set fetching ".concat(t.actionName)),fetch:Object(v.a)("".concat(t.actionType," ").concat(t.actionName)),fetchSuccess:Object(v.a)("".concat(t.actionType," ").concat(t.actionName," success"))},e.actionCreators={setFetching:Object(N.a)("set fetching ".concat(t.actionName)),fetch:Object(N.a)("".concat(t.actionType," ").concat(t.actionName)),fetchSuccess:Object(N.a)("".concat(t.actionType," ").concat(t.actionName," success"))},e.sagas={sagaName:Object(N.a)("".concat(t.actionType," ").concat(t.actionName," saga"))},e.valueNames={value:Object(N.a)("".concat(t.actionName)),fetchingValue:Object(N.a)("fetching ".concat(t.actionName))},e.selectors={value:Object(N.a)("select ".concat(t.actionName)),fetchingValue:Object(N.a)("select fetching ".concat(t.actionName))},e.propertyName=Object(N.a)(t.actionName);break;case y.ACTION_TYPES.set:e.constants={set:Object(v.a)("".concat(t.actionType," ").concat(t.actionName))},e.actionCreators={set:Object(N.a)("".concat(t.actionType," ").concat(t.actionName))},e.valueNames={value:Object(N.a)("".concat(t.actionName))},e.selectors={value:Object(N.a)("select ".concat(t.actionName))},e.propertyName=Object(N.a)(t.actionName)}return e}));return Object.freeze(e)}(t.actions);return console.log("enrichedActions: ",n),{generateDuckFile:function(){var t=x({moduleName:e,actions:n}),a=t.generateHeader,c=t.generateConstants,o=t.generateReducerInitState,r=t.generateReducer,s=t.generateSelectors,i=t.generateActionCreators;return a()+"\n\n"+c()+"\n"+o()+"\n"+r()+"\n\n"+s()+"\n\n"+i()+"\n"},generateSagaFile:function(){var t=function(t){t.moduleName;var e=t.actions,n=j.a.filter(e,(function(t){return t.actionType==y.ACTION_TYPES.fetch})),a=j.a.filter(e,(function(t){return t.actionType==y.ACTION_TYPES.set}));return{generateImports:function(){return"\n// vendor\nimport { call, put, all, take, select } from 'redux-saga/effects';\nimport nprogress from 'nprogress';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport history from 'store/history';\n\n//proj\nimport book from 'routes/book';\nimport { emitError } from 'core/ui/duck';\nimport { fetchAPI } from 'utils';\n\n// own\nimport {\n    ".concat(j.a.map(n,(function(t){return t.constants.fetch})).join(",\n"),"\n\n    ").concat(j.a.map(n,(function(t){return t.actionCreators.fetchSuccess})).join(",\n"),"\n\n    ").concat(j.a.map(a,(function(t){return t.actionCreators.set})).join(",\n"),"\n} from './duck';\n        ")},generateSagas:function(){return j.a.map(n,(function(t){var e=t.propertyName,n=t.constants,a=t.actionCreators,c=t.actionFetchURL,o=t.sagas;return"\nexport function* ".concat(o.sagaName,"() {\n    while (true) {\n        try {\n            yield take(").concat(n.fetch,");\n\n            yield put(").concat(a.setFetching,"(true));\n\n            const ").concat(e," = yield call(fetchAPI, 'GET', `").concat(c||"","`);\n\n            yield put(").concat(a.fetchSuccess,"({").concat(e,"}));\n\n        } catch (error) {\n            yield put(emitError(error));\n        } finally {\n            yield put(").concat(a.setFetching,"(false));\n        }\n    }\n}\n\n            ")}))},generateCommonSaga:function(){return"\nexport function* saga() {\n    yield all([\n        ".concat(j.a.map(n,(function(t){var e=t.sagas;return"call(".concat(e.sagaName,"),\n")})),"\n    ]);\n}\n        ")}}}({moduleName:e,actions:n}),a=t.generateImports,c=t.generateSagas,o=t.generateCommonSaga;return a()+"\n\n"+c()+"\n"+o()+"\n"}}},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myFile.txt",n=document.createElement("a"),a=new Blob([t],{type:"text/plain"});n.href=URL.createObjectURL(a),n.download=e,document.body.appendChild(n),n.click()},I=n(82),A=n(39),k=n(129),E=n(55),P=n(135),_=n(132),Y=(n(108),n(13)),w=k.b.Item,F=E.a.Option,R=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).updateState=function(t){var e=a.props.actionsChanged;a.setState(t,(function(){return e&&e(j.a.get(Object(A.a)(a),"state.actions"))}))},a.createNewItem=function(){a.updateState({actions:[].concat(Object(I.a)(j.a.get(Object(A.a)(a),"state.actions")),[{actionName:"vehicles",actionType:y.ACTION_TYPES.fetch,key:Object(_.a)()}])})},a.deleteItem=function(t){a.updateState({actions:Object(I.a)(j.a.filter(j.a.get(Object(A.a)(a),"state.actions"),(function(e){return e.key!=t})))})},a.onChangeInputValue=function(t,e){var n=e.actionName,c=e.actionType,o=j.a.get(Object(A.a)(a),"state.actions"),r=j.a.map(o,(function(e){return e.key==t?Object(b.a)(Object(b.a)({},e),{},{actionName:n||e.actionName,actionType:c||e.actionType}):e}));a.updateState({actions:r})},a.state={actions:[]},a}return Object(i.a)(n,[{key:"render",value:function(){var t=this;return Object(Y.jsx)("div",{children:Object(Y.jsx)(k.b,{size:"small",bordered:!0,dataSource:j.a.get(this,"state.actions"),locale:{emptyText:Object(Y.jsx)("div",{children:"No actions"})},header:Object(Y.jsx)(d.a,{onClick:function(){return t.createNewItem()},type:"primary",children:"Create a new one"}),renderItem:function(e){return Object(Y.jsx)(w,{actions:[Object(Y.jsx)(d.a,{onClick:function(){return t.deleteItem(e.key)},children:Object(Y.jsx)(P.a,{})})],children:Object(Y.jsxs)("div",{className:"item",children:[Object(Y.jsx)(p.a,{className:"input",value:j.a.get(e,"actionName"),onChange:function(n){return t.onChangeInputValue(e.key,{actionName:n.target.value})}}),Object(Y.jsxs)(E.a,{value:j.a.get(e,"actionType"),className:"select",onChange:function(n){return t.onChangeInputValue(e.key,{actionType:n})},children:[Object(Y.jsx)(F,{value:y.ACTION_TYPES.fetch,children:Object(v.a)(y.ACTION_TYPES.fetch)}),Object(Y.jsx)(F,{value:y.ACTION_TYPES.set,children:Object(v.a)(y.ACTION_TYPES.set)})]})]})})}})})}}]),n}(c.a.Component),V=(n(122),m.a.Panel),$=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).onGenerateFiles=function(){var t=a.state,e=t.moduleName,n=t.actions;if(e&&!j.a.isEmpty(n)){var c=S({actions:n,moduleName:e}),o=c.generateDuckFile,r=c.generateSagaFile;C(o(),"duck.txt"),C(r(),"saga.txt"),f.a.info({message:Object(Y.jsx)("div",{children:Object(Y.jsx)("div",{children:"Module: ".concat(e)})})})}else f.a.error({message:"Not enough information provided!"})},a.state={moduleName:void 0,actions:[]},a}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.state.actions;return Object(Y.jsxs)("div",{children:[Object(Y.jsxs)(m.a,{defaultActiveKey:["1","2"],children:[Object(Y.jsx)(V,{header:"Enter module name",children:Object(Y.jsx)(p.a,{placeholder:"Module name",onChange:function(e){return t.setState({moduleName:e.target.value})}})},"1"),Object(Y.jsx)(V,{header:"Create actions",children:Object(Y.jsx)(R,{actionsChanged:function(e){t.setState({actions:e})}})},"2")]}),Object(Y.jsx)(d.a,{className:"generateButton",onClick:function(){return t.onGenerateFiles()},children:"Generate file"}),Object(Y.jsx)("div",{className:"jsonContainer",children:Object(Y.jsx)(g.a,{name:!1,collapsed:!1,displayObjectSize:!1,displayDataTypes:!1,collapseStringsAfterLength:!0,style:{fontSize:"0.5em",width:"100%"},src:e})})]})}}]),n}(c.a.Component),z=n.p+"static/media/logo.6ce24c58.svg";n(124);var B=function(){return Object(Y.jsxs)("div",{className:"App",children:[Object(Y.jsxs)("header",{className:"App-header",children:[Object(Y.jsx)("img",{src:z,className:"App-logo",alt:"logo"}),Object(Y.jsx)("div",{className:"title",children:"Boilerplate reducer"})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)($,{})})]})};r.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(B,{})}),document.getElementById("root"))},20:function(t,e){t.exports={ACTION_TYPES:{fetch:"fetch",set:"set"}}}},[[125,1,2]]]);
//# sourceMappingURL=main.0ca646c7.chunk.js.map